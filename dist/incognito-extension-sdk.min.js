!function(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports["incognito-extension-sdk"]=n():e["incognito-extension-sdk"]=n()}(this,(function(){return(()=>{"use strict";var e={429:(e,n,t)=>{t.d(n,{default:()=>N});var r=function(e,n){var t=Object.assign(n||{},{name:e}),r=new CustomEvent(e,{detail:t});window.dispatchEvent(r)},o="BACKGROUND_REQUEST_CONNECT_ACCOUNT",i="BACKGROUND_CHECK_CONNECT_ACCOUNT",u="BACKGROUND_REQUEST_SEND_TX",a={ACTION_KEY:"INCOGNITO_EXTENSION|"+window.location.origin,CONNECT_TO_ACCOUNT_SUCCESS:"CONTENT_CONNECT_TO_ACCOUNT_SUCCESS",DISCONNECT_ACCOUNT:"CONTENT_DISCONNECT_ACCOUNT",SEND_TX_FINISH:"CONTENT_SEND_TX_FINISH",CANCEL_SEND_TX:"CONTENT_CANCEL_SEND_TX"};function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const f=function(){function e(n,t){if(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),!n&&"string"!==typeof n)throw new Error("Missing or invalid label");this.value=t,this.label=n,this.isRequired=!1}var n,t,r;return n=e,(t=[{key:"_throwError",value:function(e){throw new Error('Validating "'.concat(this.label,'" failed: ').concat(e,". Found ").concat(JSON.stringify(this.value)," (type of ").concat(s(this.value),")"))}},{key:"_isDefined",value:function(){return null!==this.value&&void 0!==this.value}},{key:"_onCondition",value:function(e,n){return(!this.isRequired&&this._isDefined()||this.isRequired)&&!e()&&this._throwError(n),this}},{key:"required",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Required";return this.isRequired=!0,this._onCondition((function(){return e._isDefined()}),n)}},{key:"string",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a string";return this._onCondition((function(){return"string"===typeof e.value}),n)}},{key:"boolean",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a boolean";return this._onCondition((function(){return"boolean"===typeof e.value}),n)}},{key:"function",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a function";return this._onCondition((function(){return"function"===typeof e.value}),n)}},{key:"object",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be an object";return this._onCondition((function(){return"object"===s(e.value)&&null!==e.value}),n)}},{key:"array",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be an array";return this._onCondition((function(){return e.value instanceof Array}),n)}},{key:"number",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a valid number and larger than 0";return this._onCondition((function(){return Number.isFinite(e.value)&&e.value>=0}),n)}},{key:"intergerNumber",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a valid interger number and larger than 0";return this._onCondition((function(){return Number.isInteger(e.value)&&e.value>=0}),n)}},{key:"paymentAddress",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid payment address";return this._onCondition((function(){return e.string()}),n)}},{key:"nanoAmount",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid nano amount";return this._onCondition((function(){return e.intergerNumber()}),n)}},{key:"amount",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid amount";return this._onCondition((function(){return e.string()}),n)}},{key:"token",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid token";return this._onCondition((function(){return e.object()}),n)}},{key:"tokenId",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid token id";return this._onCondition((function(){return e.string()}),n)}}])&&c(n.prototype,t),r&&c(n,r),e}();function d(e,n,t,r,o,i,u){try{var a=e[i](u),s=a.value}catch(e){return void t(e)}a.done?n(s):Promise.resolve(s).then(r,o)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){d(i,r,o,u,a,"next",e)}function a(e){d(i,r,o,u,a,"throw",e)}u(void 0)}))}}function h(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const v=new(function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.namespace=n,this.setMethod=null,this.getMethod=null,this.removeMethod=null}var n,t,r,o,i,u;return n=e,(t=[{key:"implement",value:function(e){var n=e.setMethod,t=e.getMethod,r=e.removeMethod,o=e.namespace;new f("setMethod",n).required(),new f("getMethod",t).required(),new f("removeMethod",r).required(),new f("namespace",o).string(),this.setMethod=n,this.getMethod=t,this.removeMethod=r,this.namespace=o}},{key:"_getKey",value:function(e){return this.namespace?"".concat(this.namespace,"-").concat(e):e}},{key:"set",value:(u=l(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new f("key",n).required().string(),r=JSON.stringify(t),e.next=4,this.setMethod(this._getKey(n),r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return u.apply(this,arguments)})},{key:"get",value:(i=l(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new f("key",n).required().string(),e.next=3,this.getMethod(this._getKey(n));case 3:return t=e.sent,e.abrupt("return",JSON.parse(t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"remove",value:(o=l(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new f("key",n).required().string(),e.next=3,this.removeMethod(this._getKey(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}])&&h(n.prototype,t),r&&h(n,r),e}());function p(e,n,t,r,o,i,u){try{var a=e[i](u),s=a.value}catch(e){return void t(e)}a.done?n(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){p(i,r,o,u,a,"next",e)}function a(e){p(i,r,o,u,a,"throw",e)}u(void 0)}))}}var y="INCOGNITO_STORAGE_ACCOUNT",C=function(){var e=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){r(i)}),500),e.next=3,v.get(y);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=m(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===a.CONNECT_TO_ACCOUNT_SUCCESS?3:e.t0===a.DISCONNECT_ACCOUNT?6:9;break;case 3:return e.next=5,v.set(y,t);case 5:return e.abrupt("break",10);case 6:return e.next=8,v.remove(y);case 8:case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();const N={storage:v,listenEvent:function(e){try{window.addEventListener("message",(function(n){var t=n.data,r=t.data,o=t.actionKey,i=t.actionName;o&&o===a.ACTION_KEY&&(g(i,r).then(),e(i,r))}),!1)}catch(e){}},connectAccount:function(){r(o)},requestSendTx:function(e){var n=e.accountName,t=e.toAddress,o=e.amount,i=e.memo,a=e.tokenId;return new f("payload",e).required().object(),new f("accountName",n).required().string(),new f("toAddress",t).required().paymentAddress(),new f("amount",o).required().amount(),new f("tokenId",a).required().tokenId(),new f("memo",i).string(),new Promise((function(e,s){try{var c={accountName:n,toAddress:t,amount:o,memo:i,tokenId:a};r(u,c),e(c)}catch(e){s(e)}}))},checkConnectAccount:C,RECEIVE_ACTIONS_NAME:a}}},n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}return t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(429)})().default}));